{"ast":null,"code":"var _jsxFileName = \"D:\\\\finalyear-2\\\\Ger-s-Garage\\\\client\\\\src\\\\Components\\\\Admin\\\\WorkersAdmin.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { userRequest } from \"../../Utils/requestMethods\";\nimport Loading from \"../Loading\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WorkersAdmin = () => {\n  _s();\n  const qc = useQueryClient();\n  const {\n    data = [],\n    isFetching,\n    error\n  } = useQuery({\n    queryKey: [\"adminWorkers\"],\n    queryFn: async () => {\n      const res = await userRequest.get(\"/admin/workers\");\n      return res.data;\n    }\n  });\n  const onDelete = async id => {\n    if (!window.confirm(\"Delete this worker?\")) return;\n    try {\n      await userRequest.delete(`/admin/workers/${id}`);\n      toast.success(\"Worker deleted\");\n      qc.invalidateQueries([\"adminWorkers\"]);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      toast.error((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || \"Failed to delete worker\");\n    }\n  };\n  if (isFetching) return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 26\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Error loading workers: \", String(error.message)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"Workers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), data.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No workers yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(List, {\n      children: data.map(w => /*#__PURE__*/_jsxDEV(Item, {\n        children: [/*#__PURE__*/_jsxDEV(Info, {\n          children: [/*#__PURE__*/_jsxDEV(Name, {\n            children: [w.firstname, \" \", w.surname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Small, {\n            children: w.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Small, {\n            children: w.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Actions, {\n          children: /*#__PURE__*/_jsxDEV(Delete, {\n            onClick: () => onDelete(w._id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 15\n        }, this)]\n      }, w._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n_s(WorkersAdmin, \"HK2megYFiyxtWENAbOa99WRFj9M=\", false, function () {\n  return [useQueryClient, useQuery];\n});\n_c = WorkersAdmin;\nexport default WorkersAdmin;\nconst Card = styled.div`\n  padding: 1rem;\n  margin: 1rem auto;\n  max-width: 60rem;\n  width: 90%;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\n  border-radius: 10px;\n  background: #fff;\n`;\n_c2 = Card;\nconst Title = styled.h4`\n  margin: 0 0 0.6rem 0;\n`;\n_c3 = Title;\nconst List = styled.ul`\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`;\n_c4 = List;\nconst Item = styled.li`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.6rem 0;\n  border-bottom: 1px solid #eee;\n`;\n_c5 = Item;\nconst Info = styled.div``;\n_c6 = Info;\nconst Name = styled.div`\n  font-weight: 700;\n`;\n_c7 = Name;\nconst Small = styled.div`\n  font-size: 0.9rem;\n  color: #555;\n`;\n_c8 = Small;\nconst Actions = styled.div``;\n_c9 = Actions;\nconst Delete = styled.button`\n  background: #e53e3e;\n  color: white;\n  border: none;\n  padding: 0.4rem 0.6rem;\n  border-radius: 6px;\n  cursor: pointer;\n`;\n_c10 = Delete;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n$RefreshReg$(_c, \"WorkersAdmin\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"List\");\n$RefreshReg$(_c5, \"Item\");\n$RefreshReg$(_c6, \"Info\");\n$RefreshReg$(_c7, \"Name\");\n$RefreshReg$(_c8, \"Small\");\n$RefreshReg$(_c9, \"Actions\");\n$RefreshReg$(_c10, \"Delete\");","map":{"version":3,"names":["React","styled","useQuery","useQueryClient","userRequest","Loading","toast","WorkersAdmin","qc","data","isFetching","error","queryKey","queryFn","res","get","onDelete","id","window","confirm","delete","success","invalidateQueries","err","console","response","String","message","length","map","w","firstname","surname","email","phone","_id","Card","div","Title","h4","List","ul","Item","li","Info","Name","Small","Actions","Delete","button"],"sources":["D:/finalyear-2/Ger-s-Garage/client/src/Components/Admin/WorkersAdmin.jsx"],"sourcesContent":["import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { userRequest } from \"../../Utils/requestMethods\";\r\nimport Loading from \"../Loading\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst WorkersAdmin = () => {\r\n  const qc = useQueryClient();\r\n  const { data = [], isFetching, error } = useQuery({\r\n    queryKey: [\"adminWorkers\"],\r\n    queryFn: async () => {\r\n      const res = await userRequest.get(\"/admin/workers\");\r\n      return res.data;\r\n    },\r\n  });\r\n\r\n  const onDelete = async (id) => {\r\n    if (!window.confirm(\"Delete this worker?\")) return;\r\n    try {\r\n      await userRequest.delete(`/admin/workers/${id}`);\r\n      toast.success(\"Worker deleted\");\r\n      qc.invalidateQueries([\"adminWorkers\"]);\r\n    } catch (err) {\r\n      console.error(err);\r\n      toast.error(err?.response?.data?.error || \"Failed to delete worker\");\r\n    }\r\n  };\r\n\r\n  if (isFetching) return <Loading />;\r\n  if (error) return <p>Error loading workers: {String(error.message)}</p>;\r\n\r\n  return (\r\n    <Card>\r\n      <Title>Workers</Title>\r\n      {data.length === 0 ? (\r\n        <p>No workers yet.</p>\r\n      ) : (\r\n        <List>\r\n          {data.map((w) => (\r\n            <Item key={w._id}>\r\n              <Info>\r\n                <Name>{w.firstname} {w.surname}</Name>\r\n                <Small>{w.email}</Small>\r\n                <Small>{w.phone}</Small>\r\n              </Info>\r\n              <Actions>\r\n                <Delete onClick={() => onDelete(w._id)}>Delete</Delete>\r\n              </Actions>\r\n            </Item>\r\n          ))}\r\n        </List>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default WorkersAdmin;\r\n\r\nconst Card = styled.div`\r\n  padding: 1rem;\r\n  margin: 1rem auto;\r\n  max-width: 60rem;\r\n  width: 90%;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);\r\n  border-radius: 10px;\r\n  background: #fff;\r\n`;\r\nconst Title = styled.h4`\r\n  margin: 0 0 0.6rem 0;\r\n`;\r\nconst List = styled.ul`\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n`;\r\nconst Item = styled.li`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.6rem 0;\r\n  border-bottom: 1px solid #eee;\r\n`;\r\nconst Info = styled.div``;\r\nconst Name = styled.div`\r\n  font-weight: 700;\r\n`;\r\nconst Small = styled.div`\r\n  font-size: 0.9rem;\r\n  color: #555;\r\n`;\r\nconst Actions = styled.div``;\r\nconst Delete = styled.button`\r\n  background: #e53e3e;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.4rem 0.6rem;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n`;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}