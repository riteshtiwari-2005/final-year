{"ast":null,"code":"var _jsxFileName = \"D:\\\\finalyear-2\\\\Ger-s-Garage\\\\client\\\\src\\\\Components\\\\Appointment\\\\MechanicsForm.jsx\",\n  _s = $RefreshSig$();\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport FormHelperText from \"@mui/material/FormHelperText\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { publicRequest } from \"../../Utils/requestMethods\";\nimport { useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MechanicsForm = props => {\n  _s();\n  const mechanicsDisabled = props.disable;\n  const [mechanic, setMechanic] = useState(props.mechanic);\n  let availableSlot1 = false;\n  let availableSlot2 = false;\n  let availableSlot3 = false;\n  let availableSlot4 = false;\n  const handleChangeTime = newValue => {\n    setMechanic(newValue.target.value);\n    // props.mechanic(newValue.target.value);\n    props.onChange(newValue.target.value);\n  };\n  const [showAll, setShowAll] = useState(false);\n  const {\n    data: workers = [],\n    isLoading\n  } = useQuery({\n    queryKey: [\"workersList\", props.service],\n    queryFn: async () => {\n      const url = props.service ? `/workers?serviceId=${props.service._id || props.service}` : \"/workers\";\n      const res = await publicRequest.get(url);\n      return res.data;\n    }\n  });\n  const {\n    data: allWorkers = []\n  } = useQuery({\n    queryKey: [\"allWorkers\"],\n    queryFn: async () => {\n      const res = await publicRequest.get(\"/workers\");\n      return res.data;\n    },\n    enabled: showAll\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(FormControl, {\n      disabled: mechanicsDisabled,\n      required: true,\n      sx: {\n        m: 1,\n        minWidth: 200\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"demo-simple-select-required-label\",\n        children: \"Professionals\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        labelId: \"demo-simple-select-required-label\",\n        id: \"demo-simple-select-required\",\n        value: mechanic,\n        label: \"Professional *\",\n        onChange: handleChangeTime,\n        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n          value: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"None\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), isLoading ? /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: \"loading\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this) : (showAll ? allWorkers : workers).map(w => /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: w._id,\n          children: [w.firstname, \" \", w.surname]\n        }, w._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 15\n        }, this)), !isLoading && !showAll && props.service && workers.length === 0 && /*#__PURE__*/_jsxDEV(MenuItem, {\n          onClick: () => setShowAll(true),\n          value: \"show_all\",\n          children: \"Show all professionals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n        children: \"Select one of our Professionals\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(MechanicsForm, \"sWLI42ukAAixAqWhyNWy4US/TnU=\", false, function () {\n  return [useQuery, useQuery];\n});\n_c = MechanicsForm;\nexport default MechanicsForm;\nvar _c;\n$RefreshReg$(_c, \"MechanicsForm\");","map":{"version":3,"names":["InputLabel","MenuItem","FormHelperText","FormControl","Select","useQuery","publicRequest","useState","MechanicsForm","props","mechanicsDisabled","disable","mechanic","setMechanic","availableSlot1","availableSlot2","availableSlot3","availableSlot4","handleChangeTime","newValue","target","value","onChange","showAll","setShowAll","data","workers","isLoading","queryKey","service","queryFn","url","_id","res","get","allWorkers","enabled","m","minWidth","map","w","firstname","surname","length"],"sources":["D:/finalyear-2/Ger-s-Garage/client/src/Components/Appointment/MechanicsForm.jsx"],"sourcesContent":["import InputLabel from \"@mui/material/InputLabel\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport FormHelperText from \"@mui/material/FormHelperText\";\r\nimport FormControl from \"@mui/material/FormControl\";\r\nimport Select from \"@mui/material/Select\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { publicRequest } from \"../../Utils/requestMethods\";\r\nimport { useState } from \"react\";\r\n\r\n\r\nconst MechanicsForm = (props) => {\r\n  const mechanicsDisabled = props.disable;\r\n  const [mechanic, setMechanic] = useState(props.mechanic);\r\n  let availableSlot1 = false;\r\n  let availableSlot2 = false;\r\n  let availableSlot3 = false;\r\n  let availableSlot4 = false;\r\n\r\n  const handleChangeTime = (newValue) => {\r\n    setMechanic(newValue.target.value);\r\n    // props.mechanic(newValue.target.value);\r\n    props.onChange(newValue.target.value);\r\n  };\r\n\r\n  const [showAll, setShowAll] = useState(false);\r\n\r\n  const { data: workers = [], isLoading } = useQuery({\r\n    queryKey: [\"workersList\", props.service],\r\n    queryFn: async () => {\r\n      const url = props.service ? `/workers?serviceId=${props.service._id || props.service}` : \"/workers\";\r\n      const res = await publicRequest.get(url);\r\n      return res.data;\r\n    },\r\n  });\r\n\r\n  const { data: allWorkers = [] } = useQuery({\r\n    queryKey: [\"allWorkers\"],\r\n    queryFn: async () => {\r\n      const res = await publicRequest.get(\"/workers\");\r\n      return res.data;\r\n    },\r\n    enabled: showAll,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <FormControl\r\n        disabled={mechanicsDisabled}\r\n        required\r\n        sx={{ m: 1, minWidth: 200 }}\r\n      >\r\n        <InputLabel id=\"demo-simple-select-required-label\">Professionals</InputLabel>\r\n        <Select\r\n          labelId=\"demo-simple-select-required-label\"\r\n          id=\"demo-simple-select-required\"\r\n          value={mechanic}\r\n          label=\"Professional *\"\r\n          onChange={handleChangeTime}\r\n        >\r\n          <MenuItem value={\"\"}>\r\n            <em>None</em>\r\n          </MenuItem>\r\n          {isLoading ? (\r\n            <MenuItem value=\"loading\">Loading...</MenuItem>\r\n          ) : ( \r\n            (showAll ? allWorkers : workers).map((w) => (\r\n              <MenuItem key={w._id} value={w._id}>\r\n                {w.firstname} {w.surname}\r\n              </MenuItem>\r\n            ))\r\n          )}\r\n          {!isLoading && !showAll && props.service && workers.length === 0 && (\r\n            <MenuItem onClick={() => setShowAll(true)} value=\"show_all\">Show all professionals</MenuItem>\r\n          )}\r\n        </Select>\r\n        <FormHelperText>Select one of our Professionals</FormHelperText>\r\n      </FormControl>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MechanicsForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}